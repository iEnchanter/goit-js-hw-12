{"version":3,"file":"index.js","sources":["../src/js/pixabay-api.js","../src/js/render-functions.js","../src/main.js"],"sourcesContent":["import axios from 'axios';\n\nconst BASE_URL = 'https://pixabay.com/api/';\nconst API_KEY = '50364226-d4960ed7ef7ef1013eeb128c9';\n\n\nexport async function getImagesByQuery(query, page) {\n    const params = {\n        key: API_KEY,\n        q: query,\n        image_type: 'photo',\n        orientation: 'horizontal',\n        safesearch: true,\n        page: page,\n        per_page: 15,\n    };\n\nconst response = await axios.get(BASE_URL, { params });\n    return response.data;\n}\n","import SimpleLightbox from 'simplelightbox';\nimport 'simplelightbox/dist/simple-lightbox.min.css';\n\nconst galleryList = document.querySelector('.gallery');\nconst loader = document.querySelector('.loader');\nconst loadMoreBtn = document.querySelector('.load-more');\n\nconst lightbox = new SimpleLightbox('.gallery a');\n\nexport function createGallery(images) {\n    const markup = images\n        .map(\n            ({\n                webformatURL,\n                largeImageURL,\n                tags,\n                likes,\n                views,\n                comments,\n                downloads,\n            }) => `\n                <li class=\"gallery-item\">\n                    <a href=\"${largeImageURL}\">\n                        <img class=\"img\" src=\"${webformatURL}\" alt=\"${tags}\" />\n                    </a>\n                    <div class=\"info\">\n                        <div class=\"info-item\">\n                            <p class=\"label\">Likes:</p>\n                            <p class=\"value\">${likes}</p>\n                        </div>\n                        <div class=\"info-item\">\n                            <p class=\"label\">Views:</p>\n                            <p class=\"value\">${views}</p>\n                        </div>\n                        <div class=\"info-item\">\n                            <p class=\"label\">Comments:</p>\n                            <p class=\"value\">${comments}</p>\n                        </div>\n                        <div class=\"info-item\">\n                            <p class=\"label\">Downloads:</p>\n                            <p class=\"value\">${downloads}</p>\n                        </div>\n                    </div>\n                </li>\n            `\n        )\n        .join('');\n\n    galleryList.insertAdjacentHTML('beforeend', markup);\n    lightbox.refresh();\n}\n\nexport function clearGallery() {\n    galleryList.innerHTML = '';\n}\n\nexport function showLoader() {\n    loader.classList.remove('hidden');\n}\n\nexport function hideLoader () {\n    loader.classList.add('hidden');\n}\n\nexport function showLoadMoreButton() {\n    loadMoreBtn.classList.remove('hidden');\n}\n\nexport function hideLoadMoreButton() {\n    loadMoreBtn.classList.add('hidden');\n}","import { getImagesByQuery } from './js/pixabay-api';\nimport {\n    createGallery,\n    clearGallery,\n    showLoader,\n    hideLoader,\n    showLoadMoreButton,\n    hideLoadMoreButton,\n} from './js/render-functions';\nimport iziToast from 'izitoast';\nimport 'izitoast/dist/css/iziToast.min.css';\n\n\nconst formEl = document.querySelector('.form');\nconst inputEl = document.getElementById('search-text');\nconst loadMoreBtn = document.querySelector('.load-more');\n\nlet currentQuery = '';\nlet currentPage = 1;\nlet totalHits = 0;\n\nformEl.addEventListener('submit', async e => {\n    e.preventDefault();\n\n    currentQuery = inputEl.value.trim();\n    if (!currentQuery) {\n        iziToast.warning({\n            title: 'Oops',\n            message: 'Please enter a search term.',\n        });\n        return;\n    }\n\n    currentPage = 1;\n    clearGallery();\n    showLoader();\n\n    await fetchImages();\n});\n\nloadMoreBtn.addEventListener('click', async () => {\n    currentPage += 1;\n    await fetchImages();\n});\n\nasync function fetchImages() {\n    showLoader();\n\n    try {\n        const data = await getImagesByQuery(currentQuery, currentPage);\n\n        if (data.hits.length === 0 && currentPage === 1) {\n            iziToast.info({\n                message: 'No images found. Try another query.',\n            });\n            hideLoader();\n            return;\n        }\n\n        createGallery(data.hits);\n\n        totalHits = data.totalHits;\n        const totalPages = Math.ceil(totalHits / 15);\n\n        if (currentPage < totalPages) {\n            showLoadMoreButton();\n        } else {\n            hideLoadMoreButton();\n            iziToast.info({\n                message: \"We're sorry, but you've reached the end of search results.\",\n            });\n        }\n\n        if (currentPage > 1) {\n            smoothScroll();\n        }\n    } catch (error) {\n        console.error(error);\n        iziToast.error({\n            message: 'Sorry, there are no images matching your search query. Please try again!',\n        });\n    } finally {\n        hideLoader();\n    }\n}  \n\nfunction smoothScroll() {\n    const { height: cardHeight } = document.querySelector('.gallery .gallery-item').getBoundingClientRect();\n    window.scrollBy({\n        top: cardHeight * 2,\n        behavior: 'smooth',\n    });\n}\n"],"names":["BASE_URL","API_KEY","getImagesByQuery","query","page","params","axios","galleryList","loader","loadMoreBtn","lightbox","SimpleLightbox","createGallery","images","markup","webformatURL","largeImageURL","tags","likes","views","comments","downloads","clearGallery","showLoader","hideLoader","showLoadMoreButton","hideLoadMoreButton","formEl","inputEl","currentQuery","currentPage","totalHits","e","iziToast","fetchImages","data","totalPages","smoothScroll","error","cardHeight"],"mappings":"owBAEA,MAAMA,EAAW,2BACXC,EAAU,qCAGT,eAAeC,EAAiBC,EAAOC,EAAM,CAChD,MAAMC,EAAS,CACX,IAAKJ,EACL,EAAGE,EACH,WAAY,QACZ,YAAa,aACb,WAAY,GACZ,KAAMC,EACN,SAAU,EAClB,EAGI,OADa,MAAME,EAAM,IAAIN,EAAU,CAAE,OAAAK,CAAM,CAAE,GACjC,IACpB,CChBA,MAAME,EAAc,SAAS,cAAc,UAAU,EAC/CC,EAAS,SAAS,cAAc,SAAS,EACzCC,EAAc,SAAS,cAAc,YAAY,EAEjDC,EAAW,IAAIC,EAAe,YAAY,EAEzC,SAASC,EAAcC,EAAQ,CAClC,MAAMC,EAASD,EACV,IACG,CAAC,CACG,aAAAE,EACA,cAAAC,EACA,KAAAC,EACA,MAAAC,EACA,MAAAC,EACA,SAAAC,EACA,UAAAC,CAChB,IAAkB;AAAA;AAAA,+BAEaL,CAAa;AAAA,gDACID,CAAY,UAAUE,CAAI;AAAA;AAAA;AAAA;AAAA;AAAA,+CAK3BC,CAAK;AAAA;AAAA;AAAA;AAAA,+CAILC,CAAK;AAAA;AAAA;AAAA;AAAA,+CAILC,CAAQ;AAAA;AAAA;AAAA;AAAA,+CAIRC,CAAS;AAAA;AAAA;AAAA;AAAA,aAK/C,EACA,KAAK,EAAE,EAEZd,EAAY,mBAAmB,YAAaO,CAAM,EAClDJ,EAAS,QAAO,CACpB,CAEO,SAASY,GAAe,CAC3Bf,EAAY,UAAY,EAC5B,CAEO,SAASgB,GAAa,CACzBf,EAAO,UAAU,OAAO,QAAQ,CACpC,CAEO,SAASgB,GAAc,CAC1BhB,EAAO,UAAU,IAAI,QAAQ,CACjC,CAEO,SAASiB,GAAqB,CACjChB,EAAY,UAAU,OAAO,QAAQ,CACzC,CAEO,SAASiB,GAAqB,CACjCjB,EAAY,UAAU,IAAI,QAAQ,CACtC,CCzDA,MAAMkB,EAAS,SAAS,cAAc,OAAO,EACvCC,EAAU,SAAS,eAAe,aAAa,EAC/CnB,EAAc,SAAS,cAAc,YAAY,EAEvD,IAAIoB,EAAe,GACfC,EAAc,EACdC,EAAY,EAEhBJ,EAAO,iBAAiB,SAAU,MAAMK,GAAK,CAIzC,GAHAA,EAAE,eAAc,EAEhBH,EAAeD,EAAQ,MAAM,OACzB,CAACC,EAAc,CACfI,EAAS,QAAQ,CACb,MAAO,OACP,QAAS,6BACrB,CAAS,EACD,MACH,CAEDH,EAAc,EACdR,IACAC,IAEA,MAAMW,EAAW,CACrB,CAAC,EAEDzB,EAAY,iBAAiB,QAAS,SAAY,CAC9CqB,GAAe,EACf,MAAMI,EAAW,CACrB,CAAC,EAED,eAAeA,GAAc,CACzBX,IAEA,GAAI,CACA,MAAMY,EAAO,MAAMjC,EAAiB2B,EAAcC,CAAW,EAE7D,GAAIK,EAAK,KAAK,SAAW,GAAKL,IAAgB,EAAG,CAC7CG,EAAS,KAAK,CACV,QAAS,qCACzB,CAAa,EACDT,IACA,MACH,CAEDZ,EAAcuB,EAAK,IAAI,EAEvBJ,EAAYI,EAAK,UACjB,MAAMC,EAAa,KAAK,KAAKL,EAAY,EAAE,EAEvCD,EAAcM,EACdX,KAEAC,IACAO,EAAS,KAAK,CACV,QAAS,4DACzB,CAAa,GAGDH,EAAc,GACdO,GAEP,OAAQC,EAAO,CACZ,QAAQ,MAAMA,CAAK,EACnBL,EAAS,MAAM,CACX,QAAS,0EACrB,CAAS,CACT,QAAc,CACNT,GACH,CACL,CAEA,SAASa,GAAe,CACpB,KAAM,CAAE,OAAQE,GAAe,SAAS,cAAc,wBAAwB,EAAE,wBAChF,OAAO,SAAS,CACZ,IAAKA,EAAa,EAClB,SAAU,QAClB,CAAK,CACL"}